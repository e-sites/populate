(function(c){c.fn.extend({populate:function(b,g){function f(a){return h.replace("{key}",a.key).replace("{value}",a.value)}var i={select:null,exclude:null,opPopulate:null},h='<option value="{key}">{value}</option>',j=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,d=[],e;if(b instanceof Object)for(e in b)b.hasOwnProperty(e)&&d.push(f({key:e,value:b[e]}));else b.constructor===String&&""!==b&&(j.test(b)?d=b:c.map(b.split("&"),function(a){d.push(f({key:a.split("=")[0],value:a.split("=")[1].replace("+"," ")}))}));
return this.each(function(){var a=c.extend(i,g),b=c(this);"SELECT"===this.nodeName&&(b.find(a.exclude?"option:not("+a.exclude+")":"option").remove().end().append(d).removeAttr("disabled"),null!==a.select&&c(this.options).removeAttr("selected").filter(a.select).attr("selected","selected"),a.onPopulate&&c.isFunction(a.onPopulate)&&a.onPopulate.apply(this,[d]))})}})})(jQuery);
